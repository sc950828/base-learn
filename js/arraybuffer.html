<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>arraybuffer</title>
  </head>
  <body>
    <script>
      // 1个字（word）为2个字节（byte）
      // 1个字节（byte）占8位（bit）
      // 1位（bit）在二进制中就是数字0或1

      // 创建一个长度为 16 的 buffer 它会分配一个 16 字节（byte）的连续内存空间，并用 0 进行预填充。
      const buffer1 = new ArrayBuffer(16);
      console.log(buffer1);

      // Uint8Array —— 将 ArrayBuffer 中的每个字节视为 0 到 255 之间的单个数字（每个字节是 8 位，因此只能容纳那么多）。这称为 “8 位无符号整数”。
      // Uint16Array —— 将每 2 个字节视为一个 0 到 65535 之间的整数。这称为 “16 位无符号整数”。
      // Uint32Array —— 将每 4 个字节视为一个 0 到 4294967295 之间的整数。这称为 “32 位无符号整数”。
      // Float64Array —— 将每 8 个字节视为一个 5.0x10-324 到 1.8x10308 之间的浮点数。
      const uint8 = new Uint8Array(buffer1);
      const uint16 = new Uint16Array(buffer1);
      const uint32 = new Uint32Array(buffer1);
      const float64 = new Float64Array(buffer1);
      console.log(uint8);
      // console.log(uint16);
      // console.log(uint32);
      // console.log(float64);

      uint8[0] = 255;
      console.log(uint8);

      console.log(uint8.buffer);

      // 可以转成各种格式
      const dataView1 = new DataView(buffer1);
      // 接受三个参数，1.字节序号，2.写入的数据，3.写入方式（true：小端/false|undeifined:大端）
      dataView1.setFloat64(0, 25, false); // 在第一个字节以大端字节序写入一个值为25的32位整数
      console.log(dataView1);
      console.log(dataView1.getUint8(0)); // 64
      console.log(dataView1.getUint16(0)); // 16441
      console.log(dataView1.getUint32(0)); // 1077477376
      console.log(dataView1.getFloat64(0)); // 25
    </script>
  </body>
</html>
