<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>array</title>
  </head>
  <body>
    <script>
      // 数组的创建
      const arr1 = [1, 2, 3];
      console.log(arr1); // [1, 2, 3]
      const arr2 = new Array();
      console.log(arr2); // []
      // 创建长度为10的空数组
      const arr3 = new Array(10);
      console.log(arr3, arr3.length); // [ <10 empty items> ] 10
      // 创建一个数组，元素是7
      const arrOf = Array.of(7);
      console.log(arrOf); //[7]
      // 创建带初始值的1, 2, 3数组
      const arr4 = new Array(1, 2, 3);
      console.log(arr4); // [ 1, 2, 3 ]

      // 方法
      // concat() 连接两个数组并返回新的数组，不会改变原数组。
      const arr5 = [1, 2, 3];
      const arr6 = [4, 5, 6];
      const arr7 = arr5.concat(arr6);
      console.log("---concat---", arr5, arr6, arr7); // [ 1, 2, 3 ] [ 4, 5, 6 ] [ 1, 2, 3, 4, 5, 6 ]

      // copyWithin(target, start, end) 从数组的指定位置拷贝元素到数组的另一个指定位置中，会改变原数组但是不改变原数组长度。
      const arr8 = [1, 2, 3, 4, 5, 6];
      const arr9 = arr8.copyWithin(2, 1, 4); //[ 1, 2, 2, 3, 4, 6 ]
      console.log("---copyWithin---", arr8, arr9); // [ 1, 2, 2, 3, 4, 6 ] [ 1, 2, 2, 3, 4, 6 ]

      // entries() 返回数组的可迭代对象。
      const arr10 = ["a", "b", "c", "d", "e", "f"];
      for (const entry of arr10.entries()) {
        console.log("---entries---", entry);
      }
      // keys() 返回数组的下标数组
      for (const key of arr10.keys()) {
        console.log("---keys---", key);
      }
      // values() 返回数组的值数组
      for (const value of arr10.values()) {
        console.log("---values---", value);
      }

      // every() 检测数值元素的每个元素是否都符合条件。返回true或false
      const arr11 = [1, 2, 3, 4, 5, 6];
      const everyValue = arr11.every((item) => item >= 1);
      console.log("---every---", everyValue);

      // some() 检测数值元素是否符合某条件。返回true或false
      const arr12 = [1, 2, 3, 4, 5, 6];
      const someValue = arr11.some((item) => item > 7);
      console.log("---some---", someValue);

      // filter() 检测数值元素，并返回符合条件所有元素的数组。
      const arr13 = [1, 2, 3, 4, 5, 6];
      const arr14 = arr13.filter((item) => item > 3);
      console.log("---filter---", arr14);

      // forEach() 数组每个元素都执行一次回调函数。 没返回值。
      const arr15 = [
        { age: 24 },
        { age: 25 },
        { age: 26 },
        { age: 27 },
        { age: 28 },
        { age: 29 },
      ];
      const arr16 = arr15.forEach((item) => (item.age = item.age + 10));
      console.log("---forEach---", arr15, arr16);

      // map() 通过指定函数处理数组的每个元素，并返回处理后的数组。不会改变原数组。
      const arr17 = [1, 2, 3, 4, 5, 6];
      const arr18 = arr17.map((item) => item * 10);
      console.log("---map---", arr17, arr18); // [ 1, 2, 3, 4, 5, 6 ] [ 10, 20, 30, 40, 50, 60 ]

      // fill() 使用一个固定值来填充数组。
      const arr19 = new Array(5);
      arr19.fill(10);
      console.log("---fill---", arr19); // [ 10, 10, 10, 10, 10 ]

      // find 返回符合条件的元素
      const arr20 = [1, 2, 3, 4, 5, 6];
      const ele1 = arr20.find((item) => item > 5);
      console.log("---find---", ele1); // 6

      // findIndex 返回符合条件的元素下标
      const arr21 = [1, 2, 3, 4, 5, 6];
      const index1 = arr21.findIndex((item) => item > 4);
      console.log("---findIndex---", index1); // 4

      // indexOf 搜索数组中的元素，并返回它所在的位置。没找到返回-1。
      const arr22 = [1, 2, 3, 3, 2, 1];
      const index2 = arr22.indexOf(3);
      const index3 = arr22.indexOf(5);
      console.log("---indexOf---", index2); // 2
      console.log("---indexOf---", index3); // -1

      // lastIndexOf 搜索数组中的元素，并返回它最后出现的位置。没找到返回-1。也就是从后往前找
      const arr23 = [1, 2, 3, 3, 2, 1];
      const index4 = arr23.lastIndexOf(3);
      const index5 = arr23.lastIndexOf(5);
      console.log("---lastIndexOf---", index4); // 3
      console.log("---lastIndexOf---", index5); // -1

      // includes() 判断一个数组是否包含一个指定的值。返回true或者false
      const arr24 = [1, 2, 3, 3, 2, 1];
      console.log("---includes---", arr24.includes(3)); // true
      console.log("---includes---", arr24.includes(5)); // false

      // Array.from() 通过给定的对象 创建一个数组。
      const arr25 = Array.from("RANDY");
      console.log("---Array.from---", arr25); // [ 'R', 'A', 'N', 'D', 'Y' ]

      // Array.isArray() 判断是不是数组
      console.log("---Array.isArray---", Array.isArray(arr25)); // true
      console.log("---Array.isArray---", Array.isArray(1)); // false

      // join() 把数组的所有元素按指定字符连接成一个字符串
      const arr26 = [1, 2, 3, 3, 2, 1];
      console.log("---join---", arr26.join("-")); // 1-2-3-3-2-1

      // toString() 把数组转换为字符串，并返回结果
      const arr27 = [1, 2, 3, 3, 2, 1];
      console.log("---toString---", arr27.toString()); // 1,2,3,3,2,1

      // valueOf() 返回数组对象的原始值，也就是数组本身
      const arr28 = [1, 2, 3, 3, 2, 1];
      console.log("---valueOf---", arr28.valueOf()); // [ 1, 2, 3, 3, 2, 1 ]

      // pop push shift unshift 数组后删除元素、数组后添加元素、数组前删除元素、数组前添加元素
      const arr29 = [1, 2, 3, 4, 5];
      arr29.push(6);
      console.log("---push---", arr29); // [ 1, 2, 3, 4, 5, 6 ]
      arr29.pop();
      console.log("---pop---", arr29); // [ 1, 2, 3, 4, 5 ]
      arr29.unshift(0);
      console.log("---unshift---", arr29); // [0, 1, 2, 3, 4, 5 ]
      arr29.shift();
      console.log("---shift---", arr29); // [ 1, 2, 3, 4, 5 ]

      // sort 数组排序 默认正序。会改变原数组。
      const arr30 = [1, 2, 4, 5, 3];
      // 正序排列
      const sortAscFun = (a, b) => {
        return a - b;
      };
      // 倒序排列
      const sortDescFun = (a, b) => {
        return b - a;
      };
      const arr31 = arr30.sort();
      // const arr32 = arr30.sort(sortAscFun);
      // const arr33 = arr30.sort(sortDescFun);
      console.log("---sort---", arr30, arr31); // [ 1, 2, 3, 4, 5 ] [ 1, 2, 3, 4, 5 ]
      // console.log("---sort---", arr30, arr32);
      // console.log("---sort---", arr30, arr33);

      // resverse 数组反转。会改变原数组。
      const arr34 = [1, 2, 4, 5, 3];
      const arr35 = arr34.reverse();
      console.log("---reverse---", arr34, arr35); // [ 3, 5, 4, 2, 1 ] [ 3, 5, 4, 2, 1 ]

      // slice(start, end) 从已有的数组中返回选定的元素。不会改变原数组。没有结束下标就到数组末尾。
      // 不写开始和结束下标就是数组的复制。
      const arr36 = [1, 2, 3, 4, 5, 6];
      const arr37 = arr36.slice(1, 2);
      const arr38 = arr36.slice(1);
      const arr39 = arr36.slice();
      console.log("---slice---", arr36, arr37); //[ 1, 2, 3, 4, 5, 6 ] [ 2 ]
      console.log("---slice---", arr36, arr38); //[ 1, 2, 3, 4, 5, 6 ] [ 2, 3, 4, 5, 6 ]
      console.log("---slice---", arr36, arr39); //[ 1, 2, 3, 4, 5, 6 ] [1, 2, 3, 4, 5, 6 ]
      // 拷贝
      arr39[2] = "a";
      console.log("---slice---", arr36, arr39); //[ 1, 2, 3, 4, 5, 6 ] [1, 2, 'a', 4, 5, 6 ]

      const arr40 = [{ name: "randy" }, { name: "demi" }];
      const arr41 = arr40.slice();
      console.log("---slice---", arr40, arr41); //[ { name: 'randy' }, { name: 'demi' } ] [ { name: 'randy' }, { name: 'demi' } ]
      arr41[1].name = "tom";
      console.log("---slice---", arr40, arr41); // [ { name: 'randy' }, { name: 'tom' } ] [ { name: 'randy' }, { name: 'tom' } ]
      // 所以使用slice进行数组的拷贝，如果数组元素是基本数据类型则就是深拷贝，如果数组元素是引用数据类型则就是浅拷贝。

      // splice(index,howmany,item1,.....,itemX) 用于添加或删除数组中的元素。会改变原数组。
      // 返回被删除的元素组成的数组。
      const arr42 = [1, 2, 3, 4, 5, 6];
      const arr43 = arr38.splice(2, 2, "a", "b");
      console.log("---splice---", arr42, arr43); // [ 1, 2, 'a', 'b', 5, 6 ] [ 3, 4 ]

      // reduce(function(total, currentValue, currentIndex, arr), initialValue)
      // 接收一个函数作为累加器，数组中的每个值（从左到右）开始缩减，最终计算为一个值。
      // 没有初始值，下标从数组第二个元素开始，total为数组的第一个元素值
      const arr44 = [1, 2, 3, 4, 5, 6];
      const result1 = arr44.reduce((total, currentValue, currentIndex, arr) => {
        console.log(total, currentValue, currentIndex, arr);
      });
      console.log("---reduce---", result1); //undefined
      // 有初始值，下标从数组的第一个元素开始，total为初始值
      const result2 = arr44.reduce((total, currentValue, currentIndex, arr) => {
        console.log(total, currentValue, currentIndex, arr);
      }, 10);
      console.log("---reduce---", result2); //undefined

      // 有返回值
      const result3 = arr44.reduce((total, currentValue, currentIndex, arr) => {
        console.log(total, currentValue, currentIndex, arr);
        return total + currentValue;
      });
      console.log("---reduce---", result3); //21
      const result4 = arr44.reduce((total, currentValue, currentIndex, arr) => {
        console.log(total, currentValue, currentIndex, arr);
        return total + currentValue;
      }, 0);
      console.log("---reduce---", result4); //21

      // reduceRight(function(total, currentValue, currentIndex, arr), initialValue)
      // 接收一个函数作为累加器，数组中的每个值（从右到左）开始缩减，最终计算为一个值。
      // 没有初始值，下标从数组倒数第二个元素开始，total为数组的倒数第一个元素值
      const arr45 = [1, 2, 3, 4, 5, 6];
      const result5 = arr45.reduceRight(
        (total, currentValue, currentIndex, arr) => {
          console.log(total, currentValue, currentIndex, arr);
        }
      );
      console.log("---reduceRight---", result5); //undefined
      // 有初始值，下标从数组的倒数第一个元素开始，total为初始值
      const result6 = arr45.reduceRight(
        (total, currentValue, currentIndex, arr) => {
          console.log(total, currentValue, currentIndex, arr);
        },
        10
      );
      console.log("---reduceRight---", result6); //undefined

      // 有返回值
      const result7 = arr45.reduceRight(
        (total, currentValue, currentIndex, arr) => {
          console.log(total, currentValue, currentIndex, arr);
          return total + currentValue;
        }
      );
      console.log("---reduceRight---", result7); //21
      const result8 = arr45.reduceRight(
        (total, currentValue, currentIndex, arr) => {
          console.log(total, currentValue, currentIndex, arr);
          return total + currentValue;
        },
        0
      );
      console.log("---reduceRight---", result8); //21

      // flat flatMap
      // flat() 方法会按照一个可指定的深度递归遍历数组，并将所有元素与遍历到的子数组中的元素合并为一个新数组返回。
      const arrFlat = [
        0,
        1,
        2,
        [5, 6],
        [
          [7, 8],
          [9, 10],
        ],
        [[[3, 4]]],
      ];
      const arr46 = arrFlat.flat(1);
      console.log("---flat---", arrFlat, arr46); // [ 0, 1, 2, [ 5, 6 ], [ [ 7, 8 ], [ 9, 10 ] ], [ [ [Array] ] ] ] [ 0, 1, 2, 5, 6, [ 7, 8 ], [ 9, 10 ], [ [ 3, 4 ] ] ]
      const arr47 = arrFlat.flat(3);
      console.log("---flat---", arrFlat, arr47); // [ 0, 1, 2, [ 5, 6 ], [ [ 7, 8 ], [ 9, 10 ] ], [ [ [Array] ] ] ] [0, 1, 2, 5, 6, 7, 8, 9, 10, 3, 4]

      // flatMap() 方法首先使用映射函数映射每个元素，然后将结果压缩成一个新数组。
      // 它与 map 连着深度值为1的 flat 几乎相同，但 flatMap 通常在合并成一种方法的效率稍微高一些。
      // 相当于做了一层flat
      const arrFlatMap = [1, 2, 3, 4, 5];
      const arr48 = arrFlatMap.map((item) => [item * 2]); // [ [ 2 ], [ 4 ], [ 6 ], [ 8 ], [ 10 ] ]
      const arr49 = arrFlatMap.flatMap((item) => [item * 2]); // [ 2, 4, 6, 8, 10 ]
      console.log("---flatMap---", arr48, arr49);

      const arrFlatMap2 = ["today is a nice day", "ok", "yes !"];
      const arr50 = arrFlatMap2.map((item) => item.split(" ")); // [ [ 'today', 'is', 'a', 'nice', 'day' ], [ 'ok' ], [ 'yes', '!' ] ]
      const arr51 = arrFlatMap2.flatMap((item) => item.split(" ")); // ["today", "is", "a", "nice", "day", "ok", "yes", "!"]
      console.log("---flatMap---", arr50, arr51);
    </script>
  </body>
</html>
